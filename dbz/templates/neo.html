{% extends 'base.html' %}
{% set showNav = True %}

{% block title %}Neo4j{% endblock %}

{% block css %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/neo.css') }}">

    {#  Show syntax-highlighted code.  #}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.22.0/themes/prism.css">
{% endblock %}



{# HTML CODE HERE#}
{% block content %}
    <h1>Welcome to NEO4J Dashboard!</h1>

    <p>
        <b>Tutorial:</b>
        You can use your mouse to navigate in the various windows and drag nodes of the graphs in this page.
        Use your scroll-wheel to zoom in and out.
    </p>
    {# TODO: bao: Jeg caller heller draw() funksjonen n√•r javascripten blir loada #}
    {#    <button type="button" class="btn btn-primary" onclick="draw()">Get All Countries</button>#}


    <div class="container-fluid">
        <div class="row">
            <div class="col-12">
                <div id="viz"></div>
            </div>
        </div>
        <div class="row">
            <div class="col-4">
                <button id="get_countries_btn" type="button" class="btn btn-primary">Show all Countries</button>
                <button type="button" class="btn btn-primary">Button 2</button>
                <button type="button" class="btn btn-primary">Button 3</button>
            </div>
        </div>

    </div>

    {# CODE: TEST #}
    <h4>Cypher: Get all Countries</h4>
    <pre><code class="language-cypher">MATCH (c:Country)-[r]->(cc:Continent) RETURN c, r, cc;</code></pre>


    <h1>Stats by Continent ordered by Month</h1>

    <div class="row">

        {# TABLE: Stats by continent #}
        <div class="col-6">
            <h5>Resulting Table when executing the script to the right </h5>
            <div id="continent_stats_table" class="ag-theme-alpine"></div>
        </div>

        {# Dropdown: Select Continent #}
        <div class="col-6">

            {# CODE: TEST #}
            <h5>Cypher Script: Stats by Continent ordered by Month</h5>
            <pre><code id="continent_code_snippet" class="language-cypher">
                MATCH
                    (e:Event)-[:IN]->(c)-[:LOCATED_IN]->(cc),
                    (e)-[:DURING]->(d)
                WHERE cc.continent = '{continent_name}'
                RETURN
                    d.date.month as month,
                    SUM(e.new_cases) as total_cases,
                    SUM(e.new_deaths) as total_deaths,
                    SUM(e.new_tests) as total_tests
                ORDER BY month
            </code></pre>


            <div class="dropdown">
                <button class="btn btn-lg btn-info dropdown-toggle" type="button" id="continent_dropdown"
                        data-toggle="dropdown"
                        aria-haspopup="true" aria-expanded="false">
                    Europe
                </button>
                <div class="dropdown-menu" aria-labelledby="continent_dropdown">
                    <button class="dropdown-item" type="button">Asia</button>
                    <button class="dropdown-item" type="button">Europe</button>
                    <button class="dropdown-item" type="button">Africa</button>
                    <button class="dropdown-item" type="button">North America</button>
                    <button class="dropdown-item" type="button">South America</button>
                    <button class="dropdown-item" type="button">Oceania</button>
                </div>
            </div>
        </div>
    </div>





    {# TABLE: Countries and Continents #}

    <div>
        <div class="col mt-5">
            <h2>Table: All Countries</h2>
            <div id="neoGrid" class="ag-theme-alpine"></div>
            {# TODO: Change id if you want to trong #}
        </div>
    </div>







{% endblock %}

{% block scripts %}
    <script src="https://cdn.neo4jlabs.com/neovis.js/v1.5.0/neovis.js"></script>

    {#  Show syntax-highlighted code.  #}
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.22.0/prism.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.22.0/components/prism-cypher.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.22.0/plugins/normalize-whitespace/prism-normalize-whitespace.min.js"></script>
    {#    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.22.0/plugins/autoloader/prism-autoloader.min.js"></script>#}

    <script src="{{ url_for('static', filename='js/neo.js') }}"></script>


{% endblock %}